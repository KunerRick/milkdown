{"version":3,"file":"index.js","sources":["../src/toolkit/browser.ts","../src/toolkit/input-rules/custom-input-rules.ts","../src/toolkit/input-rules/mark-rule.ts","../src/toolkit/position/index.ts","../src/toolkit/prose/helper.ts","../src/toolkit/prose/node.ts","../src/toolkit/prose/schema.ts","../src/toolkit/prose/selection.ts"],"sourcesContent":["/* Copyright 2021, Milkdown by Mirone. */\n\n/**\n * Copy paste from:\n * https://github.com/ProseMirror/prosemirror-view/blob/master/src/browser.ts\n */\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nconst nav = typeof navigator != 'undefined' ? navigator : null;\nconst doc = typeof document != 'undefined' ? document : null;\nconst agent = (nav && nav.userAgent) || '';\n\nconst ie_edge = /Edge\\/(\\d+)/.exec(agent);\nconst ie_upto10 = /MSIE \\d/.exec(agent);\nconst ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(agent);\n\nexport const ie = !!(ie_upto10 || ie_11up || ie_edge);\nexport const ie_version = ie_upto10\n    ? (document as typeof document & { documentMode: unknown }).documentMode\n    : ie_11up\n    ? +ie_11up![1]!\n    : ie_edge\n    ? +ie_edge![1]!\n    : 0;\nexport const gecko = !ie && /gecko\\/(\\d+)/i.test(agent);\nexport const gecko_version = gecko && +(/Firefox\\/(\\d+)/.exec(agent) || [0, 0])![1]!;\n\nconst _chrome = !ie && /Chrome\\/(\\d+)/.exec(agent);\nexport const chrome = !!_chrome;\nexport const chrome_version = _chrome ? +_chrome[1]! : 0;\nexport const safari = !ie && !!nav && /Apple Computer/.test(nav.vendor);\n// Is true for both iOS and iPadOS for convenience\nexport const ios = safari && (/Mobile\\/\\w+/.test(agent) || (!!nav && nav.maxTouchPoints > 2));\nexport const mac = ios || (nav ? /Mac/.test(nav.platform) : false);\nexport const android = /Android \\d/.test(agent);\nexport const webkit = !!doc && 'webkitFontSmoothing' in doc.documentElement.style;\nexport const webkit_version = webkit ? +(/\\bAppleWebKit\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])![1]! : 0;\n","/* Copyright 2021, Milkdown by Mirone. */\n\nimport type { InputRule } from '../../inputrules';\nimport { EditorState, Plugin, PluginKey, TextSelection, Transaction } from '../../state';\nimport type { EditorView } from '../../view';\n\nfunction run(view: EditorView, from: number, to: number, text: string, rules: InputRule[], plugin: Plugin) {\n    if (view.composing) return false;\n    const state = view.state,\n        $from = state.doc.resolve(from);\n    if ($from.parent.type.spec.code) return false;\n    const textBefore =\n        $from.parent.textBetween(Math.max(0, $from.parentOffset - 500), $from.parentOffset, undefined, '\\ufffc') + text;\n    for (let i = 0; i < rules.length; i++) {\n        const match = (rules[i] as { match: RegExp }).match.exec(textBefore);\n        const tr =\n            match &&\n            match[0] &&\n            (\n                rules[i] as { handler: (state: EditorState, match: string[], from: number, to: number) => Transaction }\n            ).handler(state, match, from - (match[0].length - text.length), to);\n        if (!tr) continue;\n        view.dispatch(tr.setMeta(plugin, { transform: tr, from, to, text }));\n        return true;\n    }\n    return false;\n}\n\nexport const customInputRulesKey = new PluginKey('MILKDOWN_CUSTOM_INPUTRULES');\nexport const customInputRules = ({ rules }: { rules: InputRule[] }): Plugin => {\n    const plugin: Plugin = new Plugin({\n        key: customInputRulesKey,\n        isInputRules: true,\n\n        state: {\n            init() {\n                return null;\n            },\n            apply(this: typeof plugin, tr, prev) {\n                const stored = tr.getMeta(this);\n                if (stored) return stored;\n                return tr.selectionSet || tr.docChanged ? null : prev;\n            },\n        },\n        props: {\n            handleTextInput(view, from, to, text) {\n                return run(view, from, to, text, rules, plugin);\n            },\n            handleDOMEvents: {\n                compositionend: (view) => {\n                    setTimeout(() => {\n                        const { $cursor } = view.state.selection as TextSelection;\n                        if ($cursor) run(view, $cursor.pos, $cursor.pos, '', rules, plugin);\n                    });\n                    return false;\n                },\n            },\n            handleKeyDown(view, event) {\n                if (event.key !== 'Enter') return false;\n                const { $cursor } = view.state.selection as TextSelection;\n                if ($cursor) return run(view, $cursor.pos, $cursor.pos, '\\n', rules, plugin);\n                return false;\n            },\n        },\n    });\n    return plugin;\n};\n","/* Copyright 2021, Milkdown by Mirone. */\nimport { InputRule } from '../../inputrules';\nimport { Mark, MarkType } from '../../model';\nimport { EditorState } from '../../state';\n\nexport function markRule(regexp: RegExp, markType: MarkType): InputRule {\n    return new InputRule(regexp, (state, match, start, end) => {\n        const { tr } = state;\n        const matchLength = match.length;\n\n        let markStart = start;\n        let markEnd = end;\n\n        if (match[matchLength - 1]) {\n            const first = match[0] as string;\n            const last = match[matchLength - 1] as string;\n            const last1 = match[matchLength - 2] as string;\n\n            const matchStart = start + first.indexOf(last1);\n            const matchEnd = matchStart + last1.length - 1;\n            const textStart = matchStart + last1.lastIndexOf(last);\n            const textEnd = textStart + last.length;\n\n            const excludedMarks = getMarksBetween(start, end, state)\n                .filter((item) => item.mark.type.excludes(markType))\n                .filter((item) => item.end > matchStart);\n\n            if (excludedMarks.length) {\n                return null;\n            }\n\n            if (textEnd < matchEnd) {\n                tr.delete(textEnd, matchEnd);\n            }\n            if (textStart > matchStart) {\n                tr.delete(matchStart, textStart);\n            }\n            markStart = matchStart;\n            markEnd = markStart + last.length;\n        }\n        tr.addMark(markStart, markEnd, markType.create());\n        tr.removeStoredMark(markType);\n        return tr;\n    });\n}\n\nfunction getMarksBetween(start: number, end: number, state: EditorState) {\n    let marks: { start: number; end: number; mark: Mark }[] = [];\n\n    state.doc.nodesBetween(start, end, (node, pos) => {\n        marks = [\n            ...marks,\n            ...node.marks.map((mark) => ({\n                start: pos,\n                end: pos + node.nodeSize,\n                mark,\n            })),\n        ];\n    });\n\n    return marks;\n}\n","/* Copyright 2021, Milkdown by Mirone. */\nimport { expectDomTypeError, missingRootElement } from '@milkdown/exception';\n\nimport type { EditorView } from '../../view';\n\ntype Point = [top: number, left: number];\n\nexport const calculateNodePosition = (\n    view: EditorView,\n    target: HTMLElement,\n    handler: (selectedRect: DOMRect, targetRect: DOMRect, parentRect: DOMRect) => Point,\n) => {\n    const state = view.state;\n    const { from } = state.selection;\n\n    const { node } = view.domAtPos(from);\n    const element = node instanceof Text ? node.parentElement : node;\n    if (!(element instanceof HTMLElement)) {\n        throw expectDomTypeError(element);\n    }\n\n    const selectedNodeRect = element.getBoundingClientRect();\n    const targetNodeRect = target.getBoundingClientRect();\n    const parent = target.parentElement;\n    if (!parent) {\n        throw expectDomTypeError(parent);\n    }\n    const parentNodeRect = parent.getBoundingClientRect();\n\n    const [top, left] = handler(selectedNodeRect, targetNodeRect, parentNodeRect);\n\n    target.style.top = top + 'px';\n    target.style.left = left + 'px';\n};\n\ntype Rect = {\n    left: number;\n    right: number;\n    top: number;\n    bottom: number;\n};\n\nexport const calculateTextPosition = (\n    view: EditorView,\n    target: HTMLElement,\n    handler: (start: Rect, end: Rect, targetRect: DOMRect, parentRect: DOMRect) => Point,\n) => {\n    const state = view.state;\n    const { from, to } = state.selection;\n    const start = view.coordsAtPos(from);\n    const end = view.coordsAtPos(to);\n\n    const targetNodeRect = target.getBoundingClientRect();\n    const parent = target.parentElement;\n    if (!parent) {\n        throw missingRootElement();\n    }\n    const parentNodeRect = parent.getBoundingClientRect();\n\n    const [top, left] = handler(start, end, targetNodeRect, parentNodeRect);\n\n    target.style.top = top + 'px';\n    target.style.left = left + 'px';\n};\n","/* Copyright 2021, Milkdown by Mirone. */\nimport type { Node as ProseNode, NodeType } from '../../model';\nimport type { Transaction } from '../../state';\n\nexport const cloneTr = (tr: Transaction): Transaction => {\n    return Object.assign(Object.create(tr), tr).setTime(Date.now());\n};\n\nexport const equalNodeType = (nodeType: NodeType | NodeType[], node: ProseNode) => {\n    return (Array.isArray(nodeType) && nodeType.indexOf(node.type) > -1) || node.type === nodeType;\n};\n","/* Copyright 2021, Milkdown by Mirone. */\nimport type { MarkType, Node as ProseNode } from '../../model';\nimport type { Predicate } from './types';\n\nexport type NodeWithPos = { pos: number; node: ProseNode };\n\nexport const flatten = (node: ProseNode, descend = true): NodeWithPos[] => {\n    const result: NodeWithPos[] = [];\n    node.descendants((child, pos) => {\n        result.push({ node: child, pos });\n        if (!descend) {\n            return false;\n        }\n        return undefined;\n    });\n    return result;\n};\n\nexport const findChildren =\n    (predicate: Predicate) =>\n    (node: ProseNode, descend?: boolean): NodeWithPos[] =>\n        flatten(node, descend).filter((child) => predicate(child.node));\n\nexport const findChildrenByMark = (node: ProseNode, markType: MarkType, descend?: boolean): NodeWithPos[] =>\n    findChildren((child) => Boolean(markType.isInSet(child.marks)))(node, descend);\n","/* Copyright 2021, Milkdown by Mirone. */\nimport { getAtomFromSchemaFail } from '@milkdown/exception';\n\nimport type { MarkType, NodeType, Schema } from '../../model';\n\nexport const getNodeFromSchema = (type: string, schema: Schema): NodeType => {\n    const target = schema.nodes[type];\n\n    if (!target) {\n        throw getAtomFromSchemaFail('node', type);\n    }\n\n    return target;\n};\n\nexport const getMarkFromSchema = (type: string, schema: Schema): MarkType => {\n    const target = schema.marks[type];\n\n    if (!target) {\n        throw getAtomFromSchemaFail('mark', type);\n    }\n\n    return target;\n};\n","/* Copyright 2021, Milkdown by Mirone. */\nimport type { Node as ProseNode, NodeType, ResolvedPos } from '../../model';\nimport { NodeSelection, Selection } from '../../state';\nimport { equalNodeType } from './helper';\nimport type { Predicate } from './types';\n\nexport type ContentNodeWithPos = { pos: number; start: number; depth: number; node: ProseNode };\n\nexport const findParentNodeClosestToPos =\n    (predicate: Predicate) =>\n    ($pos: ResolvedPos): ContentNodeWithPos | undefined => {\n        for (let i = $pos.depth; i > 0; i--) {\n            const node = $pos.node(i);\n            if (predicate(node)) {\n                return {\n                    pos: i > 0 ? $pos.before(i) : 0,\n                    start: $pos.start(i),\n                    depth: i,\n                    node,\n                };\n            }\n        }\n        return;\n    };\n\nexport const findParentNode =\n    (predicate: Predicate) =>\n    (selection: Selection): ContentNodeWithPos | undefined => {\n        return findParentNodeClosestToPos(predicate)(selection.$from);\n    };\n\nexport const findSelectedNodeOfType = (selection: Selection, nodeType: NodeType): ContentNodeWithPos | undefined => {\n    if (!(selection instanceof NodeSelection)) {\n        return;\n    }\n    const { node, $from } = selection;\n    if (equalNodeType(nodeType, node)) {\n        return { node, pos: $from.pos, start: $from.start($from.depth), depth: $from.depth };\n    }\n    return undefined;\n};\n"],"names":[],"mappings":"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"}