{"version":3,"file":"index.es.js","sources":["../src/index.ts"],"sourcesContent":["/* Copyright 2021, Milkdown by Mirone. */\nimport { ThemeColor, themeManagerCtx, ThemeSize } from '@milkdown/core';\nimport { dropCursor } from '@milkdown/prose/dropcursor';\nimport { gapCursor } from '@milkdown/prose/gapcursor';\nimport { createPlugin } from '@milkdown/utils';\n\nexport const cursor = createPlugin(({ getStyle, themeManager }) => {\n    themeManager.onFlush(() => {\n        getStyle(({ injectGlobal }) => {\n            const css = injectGlobal;\n            css`\n                /* copy from https://github.com/ProseMirror/prosemirror-gapcursor/blob/master/style/gapcursor.css */\n                .ProseMirror-gapcursor {\n                    display: none;\n                    pointer-events: none;\n                    position: absolute;\n                    margin: 0 !important;\n                }\n\n                .ProseMirror-gapcursor:after {\n                    content: '';\n                    display: block;\n                    position: absolute;\n                    top: -2px;\n                    width: 20px;\n                    border-top: ${themeManager.get(ThemeSize, 'lineWidth')} solid\n                        ${themeManager.get(ThemeColor, ['secondary'])};\n                    animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n                }\n\n                @keyframes ProseMirror-cursor-blink {\n                    to {\n                        visibility: hidden;\n                    }\n                }\n\n                .ProseMirror-focused .ProseMirror-gapcursor {\n                    display: block;\n                }\n            `;\n        });\n    });\n\n    return {\n        prosePlugins: (_, ctx) => {\n            const themeManager = ctx.get(themeManagerCtx);\n            const lineWidth = themeManager.get(ThemeSize, 'lineWidth');\n            const secondary = themeManager.get(ThemeColor, ['secondary']);\n\n            const width = Number(lineWidth?.match(/\\d+/)?.[0] ?? 1);\n\n            return [gapCursor(), dropCursor({ color: secondary, width })];\n        },\n    };\n})();\n"],"names":[],"mappings":";;;;AAMO,MAAM,IAAS,EAAa,CAAC,EAAE,aAAU,sBAC5C,GAAa,QAAQ,MAAM;AACd,IAAA,CAAC,EAAE,sBAAmB;AAE3B,IADY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAgBU,EAAa,IAAI,GAAW,WAAW;AAAA,0BAC/C,EAAa,IAAI,GAAY,CAAC,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA,CAc3D;AAAA,CACJ,GAEM;AAAA,EACH,cAAc,CAAC,GAAG,MAAQ;;AAChB,UAAA,IAAe,EAAI,IAAI,CAAe,GACtC,IAAY,EAAa,IAAI,GAAW,WAAW,GACnD,IAAY,EAAa,IAAI,GAAY,CAAC,WAAW,CAAC,GAEtD,IAAQ,OAAO,iCAAW,MAAM,WAAjB,kBAA0B,OAA1B,WAAgC,CAAC;AAE/C,WAAA,CAAC,EAAa,GAAA,EAAW,EAAE,OAAO,GAAW,SAAO,CAAA,CAAC;AAAA,EAChE;AAAA,EAEP,EAAE;"}